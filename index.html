<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Basketball Shooter</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #222;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            touch-action: none;
        }
        #startScreen, #gameOverScreen, #levelUpScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            font-size: 24px;
            text-align: center;
            display: none;
        }
        #startScreen input {
            padding: 10px;
            font-size: 18px;
            margin: 10px;
            border-radius: 5px;
            border: none;
        }
        #startScreen button, #gameOverScreen button, #levelUpScreen button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background: #ff4500;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="startScreen">
        <div>
            <h1>Basketball Shooter</h1>
            <p>Enter Your Name:</p>
            <input type="text" id="playerName" placeholder="Your Name" maxlength="20">
            <p>Swipe to aim and shoot. Score 12 points in 30 seconds!</p>
            <button onclick="startGame()">Start Game</button>
        </div>
    </div>
    <div id="gameOverScreen">
        <div>
            <h1>Game Over</h1>
            <p><span id="playerNameDisplay"></span>'s Score: <span id="finalScore"></span></p>
            <button onclick="restartGame()">Restart</button>
        </div>
    </div>
    <div id="levelUpScreen">
        <div>
            <h1>Level <span id="nextLevel"></span></h1>
            <p><span id="playerNameLevel"></span>'s Score: <span id="currentScore"></span></p>
            <button onclick="continueGame()">Continue</button>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            width = canvas.width;
            height = canvas.height;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        let gameState = 'start';
        let playerName = '';
        let score = 0;
        let level = 1;
        let timeLeft = 30;
        let ball = { x: width * 0.5, y: height * 0.9, vx: 0, vy: 0, state: 'ready' };
        let hoop = { x: width * 0.5, y: height * 0.2, vx: 0 };
        let lastShotTime = 0;
        let gameLoop;

        const hoopWidth = width * 0.15;
        const hoopHeight = height * 0.05;
        const ballSize = width * 0.03;
        const halfCourtY = height * 0.5;

        // Touch controls
        let touchStartX = 0, touchStartY = 0;
        canvas.addEventListener('touchstart', (e) => {
            if (ball.state === 'ready') {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            }
        });
        canvas.addEventListener('touchend', (e) => {
            if (ball.state === 'ready') {
                let touchEndX = e.changedTouches[0].clientX;
                let touchEndY = e.changedTouches[0].clientY;
                let dx = touchEndX - touchStartX;
                let dy = touchEndY - touchStartY;
                let power = Math.sqrt(dx * dx + dy * dy) / 100;
                ball.vx = dx * 0.05;
                ball.vy = dy * 0.05 * power;
                ball.state = 'shot';
                lastShotTime = Date.now();
            }
        });

        function startGame() {
            playerName = document.getElementById('playerName').value.trim() || 'Player';
            document.getElementById('startScreen').style.display = 'none';
            gameState = 'playing';
            score = 0;
            level = 1;
            timeLeft = 30;
            ball = { x: width * 0.5, y: height * 0.9, vx: 0, vy: 0, state: 'ready' };
            hoop.vx = width * 0.005 * level;
            gameLoop = setInterval(update, 1000 / 60);
        }

        function restartGame() {
            document.getElementById('å°†gameOverScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            gameState = 'start';
        }

        function continueGame() {
            document.getElementById('levelUpScreen').style.display = 'none';
            gameState = 'playing';
            timeLeft = 30;
            ball = { x: width * 0.5, y: height * 0.9, vx: 0, vy: 0, state: 'ready' };
            hoop.vx = width * 0.005 * level;
            gameLoop = setInterval(update, 1000 / 60);
        }

        function update() {
            if (gameState !== 'playing') return;

            // Update time
            timeLeft -= 1 / 60;
            if (timeLeft <= 0) {
                if (score >= 12 * level) {
                    level++;
                    if (level > 5) {
                        gameState = 'gameover';
                        document.getElementById('playerNameDisplay').textContent = playerName;
                        document.getElementById('finalScore').textContent = score;
                        document.getElementById('gameOverScreen').style.display = 'flex';
                        clearInterval(gameLoop);
                    } else {
                        gameState = 'levelup';
                        document.getElementById('nextLevel').textContent = level;
                        document.getElementById('playerNameLevel').textContent = playerName;
                        document.getElementById('currentScore').textContent = score;
                        document.getElementById('levelUpScreen').style.display = 'flex';
                        clearInterval(gameLoop);
                    }
                } else {
                    gameState = 'gameover';
                    document.getElementById('playerNameDisplay').textContent = playerName;
                    document.getElementById('finalScore').textContent = score;
                    document.getElementById('gameOverScreen').style.display = 'flex';
                    clearInterval(gameLoop);
                }
            }

            // Update hoop
            hoop.x += hoop.vx;
            if (hoop.x < hoopWidth / 2 || hoop.x > width - hoopWidth / 2) {
                hoop.vx = -hoop.vx * (1 + level * 0.2);
            }

            // Update ball
            if (ball.state === 'shot') {
                ball.x += ball.vx;
                ball.vy += 0.5; // Gravity
                ball.y += ball.vy;
                if (ball.y > height * 0.9 && Date.now() - lastShotTime > 500) {
                    // Check for score
                    if (Math.abs(ball.x - hoop.x) < hoopWidth / 2 && Math.abs(ball.y - hoop.y) < hoopHeight) {
                        score += ball.y > halfCourtY ? 3 : 2;
                    }
                    ball = { x: width * 0.5, y: height * 0.9, vx: 0, vy: 0, state: 'ready' };
                }
            }

            // Render
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, 0, width, height);
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, height * 0.7, width, height * 0.3);
            ctx.strokeStyle = '#FFF';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(width * 0.5, height * 0.5, width * 0.2, 0, Math.PI, true);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(width * 0.5, height * 0.5);
            ctx.lineTo(width * 0.5, height * 0.9);
            ctx.stroke();
            ctx.fillStyle = '#FF4500';
            ctx.fillRect(hoop.x - hoopWidth / 2, hoop.y, hoopWidth, hoopHeight);
            ctx.fillStyle = '#FFF';
            ctx.fillRect(hoop.x - hoopWidth / 4, hoop.y - height * 0.05, hoopWidth / 2, height * 0.05);
            if (ball.state === 'ready') {
                ctx.fillStyle = '#FFA500';
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ballSize, 0, Math.PI * 2);
                ctx.fill();
            } else {
                ctx.fillStyle = '#FFA500';
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ballSize, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.fillStyle = '#FFF';
            ctx.font = '20px Arial';
            ctx.fillText(`${playerName}'s Score: ${score}  Level: ${level}  Time: ${Math.ceil(timeLeft)}`, 10, 30);
        }

        window.onload = () => {
            document.getElementById('startScreen').style.display = 'flex';
        };
    </script>
</body>
</html>