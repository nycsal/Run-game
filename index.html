<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Matching Memory Game</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: #f0f8ff;
      overflow: hidden;
    }
    #game {
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }
    #scoreboard {
      display: flex;
      justify-content: space-around;
      align-items: center;
      width: 100%;
      background: #ffffff;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    #timer, #level {
      font-size: 18px;
    }
    #powerBarContainer {
      width: 40%;
      height: 10px;
      background: #ddd;
      border-radius: 10px;
      overflow: hidden;
    }
    #powerBar {
      width: 0%;
      height: 100%;
      background: linear-gradient(to right, #00f260, #0575e6);
      transition: width 0.5s ease;
    }
    #playArea {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: center;
      padding: 10px;
      position: relative;
    }
    .item {
      width: 60px;
      height: 60px;
      margin: 5px;
      border-radius: 10px;
      background-color: #ffcc00;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .item.shrink {
      transform: scale(0.8);
    }
    .matched {
      animation: matchPop 0.5s forwards;
    }
    @keyframes matchPop {
      0% { transform: scale(1); background-color: #ffcc00; }
      50% { transform: scale(1.5); background-color: #00f260; }
      100% { transform: scale(0); opacity: 0; }
    }
    #message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      display: none;
    }
  </style>
</head>
<body>
<div id="game">
  <div id="scoreboard">
    <div id="timer">Time: 45</div>
    <div id="powerBarContainer"><div id="powerBar"></div></div>
    <div id="level">Level: 1</div>
  </div>
  <div id="playArea"></div>
  <div id="message"></div>
</div>

<script>
  const playArea = document.getElementById('playArea');
  const timerDisplay = document.getElementById('timer');
  const powerBar = document.getElementById('powerBar');
  const levelDisplay = document.getElementById('level');
  const message = document.getElementById('message');

  const symbols = "ğŸğŸŠğŸ‡ğŸ‰ğŸŒğŸğŸ“ğŸ¥ğŸ¥‘ğŸ’ğŸ…ğŸ¥¥ğŸ†ğŸ¥•ğŸŒ½ğŸ„ğŸ¥”ğŸğŸ§€ğŸ—".split('');
  let selected = [];
  let matches = 0;
  let timer;
  let level = 1;
  let timeLeft = 45;
  const maxLevel = 7;

  function generateItems(level) {
    playArea.innerHTML = '';
    selected = [];
    matches = 0;
    powerBar.style.width = '0%';
    const difficultyMultiplier = 1 + 0.2 * (level - 1);
    const numPairs = Math.min(20 + level * 2, 40);
    const chosenSymbols = [];

    while (chosenSymbols.length < numPairs / 2) {
      const s = symbols[Math.floor(Math.random() * symbols.length)];
      if (!chosenSymbols.includes(s)) chosenSymbols.push(s);
    }

    let items = [...chosenSymbols, ...chosenSymbols];
    items = items.sort(() => Math.random() - 0.5);

    const size = Math.max(60 - level * 3, 30);
    const fontSize = Math.max(24 - level, 14);

    items.forEach(sym => {
      const div = document.createElement('div');
      div.className = 'item';
      div.style.width = size + 'px';
      div.style.height = size + 'px';
      div.style.fontSize = fontSize + 'px';
      div.textContent = sym;
      div.dataset.symbol = sym;
      div.addEventListener('click', () => handleSelect(div));
      playArea.appendChild(div);
    });
  }

  function handleSelect(item) {
    if (selected.length === 2 || item.classList.contains('matched') || selected.includes(item)) return;

    item.classList.add('selected');
    selected.push(item);

    if (selected.length === 2) {
      if (selected[0].dataset.symbol === selected[1].dataset.symbol) {
        selected.forEach(el => {
          el.classList.add('matched');
          setTimeout(() => el.remove(), 500);
        });
        matches++;
        updatePowerBar();
        selected = [];
        if (matches === playArea.children.length / 2) {
          endLevel(true);
        }
      } else {
        setTimeout(() => {
          selected.forEach(el => el.classList.remove('selected'));
          selected = [];
        }, 600);
      }
    }
  }

  function updatePowerBar() {
    const total = playArea.children.length / 2;
    const percent = (matches / total) * 100;
    powerBar.style.width = percent + '%';
  }

  function startTimer() {
    clearInterval(timer);
    timeLeft = 45;
    timerDisplay.textContent = `Time: ${timeLeft}`;
    timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = `Time: ${timeLeft}`;
      if (timeLeft <= 0) {
        clearInterval(timer);
        endLevel(false);
      }
    }, 1000);
  }

  function endLevel(success) {
    clearInterval(timer);
    message.style.display = 'block';
    if (success && level < maxLevel) {
      message.innerHTML = `ğŸ‰ Good job! Level ${level} complete!<br>Get ready for level ${level + 1}`;
      setTimeout(() => {
        level++;
        levelDisplay.textContent = `Level: ${level}`;
        message.style.display = 'none';
        generateItems(level);
        startTimer();
      }, 3000);
    } else if (!success) {
      message.innerHTML = `â° Time's up!<br>You reached level ${level}.<br>Try again!`;
    } else {
      message.innerHTML = `ğŸ† You completed all levels! Great memory!`;
    }
  }

  // Initial load
  generateItems(level);
  startTimer();
</script>
</body>
</html>