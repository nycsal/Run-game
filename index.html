<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Red Balloon Blaster</title>
    <style>
        /* --- CSS Styling --- */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        #game-container {
            width: 90vw;
            max-width: 900px;
            height: 95vh;
            max-height: 800px;
            border: 3px solid rgba(255,255,255,0.3);
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .game-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            text-align: center;
            z-index: 10;
            border-radius: 17px;
        }

        .hidden {
            display: none !important;
        }

        /* Start Screen */
        #start-screen h1 {
            font-size: 3em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        #start-screen input {
            padding: 15px 20px;
            margin-bottom: 30px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 25px;
            font-size: 1.2em;
            width: 70%;
            max-width: 350px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            text-align: center;
            outline: none;
            transition: all 0.3s ease;
        }

        #start-screen input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        #start-screen input:focus {
            border-color: #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .btn {
            padding: 15px 30px;
            margin: 15px;
            font-size: 1.3em;
            cursor: pointer;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #44a08d, #4ecdc4);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* Game Play Screen */
        #game-play-screen {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: stretch;
            padding: 20px;
            background: transparent;
        }

        #game-info {
            display: flex;
            justify-content: space-around;
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            font-weight: 600;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        #game-area {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            border-radius: 15px;
            cursor: crosshair;
            touch-action: none;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }

        #cannon {
            position: absolute;
            bottom: 10px;
            width: 70px;
            height: 50px;
            background: linear-gradient(45deg, #8B4513, #A0522D);
            border-radius: 15px 15px 5px 5px;
            left: calc(50% - 35px);
            cursor: pointer;
            z-index: 5;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        #cannon::before {
            content: '';
            position: absolute;
            top: -25px;
            left: 25px;
            width: 20px;
            height: 35px;
            background: linear-gradient(45deg, #555, #777);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        #cannon.moving {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }

        #controls {
            display: flex;
            justify-content: center;
            width: 100%;
            padding: 15px 0;
            margin-top: 15px;
        }

        /* Balloons - improved heart shape */
        .balloon {
            position: absolute;
            width: 35px;
            height: 35px;
            animation: fall linear forwards, float 2s ease-in-out infinite alternate;
            opacity: 1;
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            z-index: 2;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .balloon.popped {
            opacity: 0;
            transform: scale(0.2) rotate(180deg);
        }

        .balloon::before,
        .balloon::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: inherit;
            border-radius: 50%;
        }

        .balloon::before {
            left: -50%;
            transform: translateY(-50%);
        }

        .balloon::after {
            left: 50%;
            transform: translateY(-50%);
        }

        .balloon {
            transform: rotate(-45deg);
            transform-origin: center center;
        }

        /* Balloon colors with gradients */
        .balloon.red { 
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }
        .balloon.blue { 
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }
        .balloon.green { 
            background: linear-gradient(45deg, #95e1d3, #6c5ce7);
        }
        .balloon.yellow { 
            background: linear-gradient(45deg, #ffd93d, #f9ca24);
        }
        .balloon.purple { 
            background: linear-gradient(45deg, #a29bfe, #6c5ce7);
        }

        /* Cannonball */
        .cannonball {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle at 30% 30%, #fff, #ccc, #666);
            border-radius: 50%;
            z-index: 4;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* Particle effects */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd93d;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-explode 0.6s ease-out forwards;
        }

        /* Tap indicator */
        .tap-indicator {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255,255,255,0.8);
            border-radius: 50%;
            pointer-events: none;
            animation: tap-ripple 0.6s ease-out forwards;
            z-index: 6;
        }

        /* Animations */
        @keyframes fall {
            from { 
                transform: translateY(-100px) rotate(-45deg); 
            } 
            to { 
                transform: translateY(calc(100% + 50px)) rotate(-45deg); 
            }
        }

        @keyframes float {
            0%, 100% { transform: translateX(0) rotate(-45deg); }
            50% { transform: translateX(10px) rotate(-45deg); }
        }

        @keyframes fire-animation {
            0% { transform: scaleX(1) scaleY(1); }
            50% { transform: scaleX(1.3) scaleY(0.8); }
            100% { transform: scaleX(1) scaleY(1); }
        }

        @keyframes particle-explode {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translateY(-50px);
            }
        }

        @keyframes tap-ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }

        #cannon.firing::before {
            animation: fire-animation 0.2s ease-out;
        }

        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            #game-container {
                width: 95vw;
                height: 98vh;
            }
            
            #start-screen h1 {
                font-size: 2.2em;
            }
            
            .btn {
                font-size: 1.1em;
                padding: 12px 25px;
            }
            
            #game-info {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="start-screen" class="game-screen">
            <h1>üéà Red Balloon Blaster</h1>
            <p style="font-size: 1.2em; margin-bottom: 20px;">Enter your name:</p>
            <input type="text" id="playerNameInput" placeholder="Your Name">
            <button id="startButton" class="btn">Start Game</button>
        </div>

        <div id="game-play-screen" class="game-screen hidden">
            <div id="game-info">
                <p>Player: <span id="playerNameDisplay"></span></p>
                <p>Score: <span id="scoreDisplay">0</span></p>
                <p>Lives: <span id="livesDisplay">3</span></p>
                <p>Level: <span id="levelDisplay">1</span></p>
            </div>
            <div id="game-area">
                <div id="cannon"></div>
                <div class="instructions">
                    Tap anywhere to move cannon ‚Ä¢ Tap to fire ‚Ä¢ Shoot only red balloons!
                </div>
            </div>
            <div id="controls">
                <button id="pauseButton" class="btn">Pause</button>
            </div>
        </div>

        <div id="pause-screen" class="game-screen hidden">
            <h1>‚è∏Ô∏è Game Paused</h1>
            <button id="continueButton" class="btn">Continue</button>
            <button id="restartButtonPause" class="btn">Restart</button>
        </div>

        <div id="level-complete-screen" class="game-screen hidden">
            <h1 id="levelCompleteMessage">üéâ Level 1 Complete!</h1>
            <p style="font-size: 1.3em;">Good job, <span id="levelCompletePlayerName"></span>!</p>
            <button id="nextLevelButton" class="btn">Next Level</button>
        </div>

        <div id="game-over-screen" class="game-screen hidden">
            <h1>üí• Game Over!</h1>
            <p id="finalScoreMessage" style="font-size: 1.3em;">You scored <span id="finalScoreDisplay">0</span> points.</p>
            <button id="restartButtonGameOver" class="btn">Restart</button>
        </div>
    </div>

    <script>
        // --- Game State Variables ---
        let playerName = '';
        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = false;
        let gamePaused = false;
        let gameLoopInterval;
        let balloonGenerationInterval;
        const balloonsOnScreen = [];

        // --- DOM Elements ---
        const gameContainer = document.getElementById('game-container');
        const startScreen = document.getElementById('start-screen');
        const gamePlayScreen = document.getElementById('game-play-screen');
        const pauseScreen = document.getElementById('pause-screen');
        const levelCompleteScreen = document.getElementById('level-complete-screen');
        const gameOverScreen = document.getElementById('game-over-screen');

        const playerNameInput = document.getElementById('playerNameInput');
        const startButton = document.getElementById('startButton');

        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const livesDisplay = document.getElementById('livesDisplay');
        const levelDisplay = document.getElementById('levelDisplay');
        const gameArea = document.getElementById('game-area');
        const cannon = document.getElementById('cannon');
        const pauseButton = document.getElementById('pauseButton');

        const continueButton = document.getElementById('continueButton');
        const restartButtonPause = document.getElementById('restartButtonPause');

        const levelCompleteMessage = document.getElementById('levelCompleteMessage');
        const levelCompletePlayerName = document.getElementById('levelCompletePlayerName');
        const nextLevelButton = document.getElementById('nextLevelButton');

        const finalScoreDisplay = document.getElementById('finalScoreDisplay');
        const restartButtonGameOver = document.getElementById('restartButtonGameOver');

        // --- Game Settings ---
        const LEVEL_SETTINGS = {
            1: { balloonSpeed: 1.5, generationRate: 1500, nonRedChance: 0.2, balloonsToShoot: 10 },
            2: { balloonSpeed: 2.0, generationRate: 1200, nonRedChance: 0.3, balloonsToShoot: 12 },
            3: { balloonSpeed: 2.5, generationRate: 1000, nonRedChance: 0.4, balloonsToShoot: 15 },
            4: { balloonSpeed: 3.0, generationRate: 800, nonRedChance: 0.5, balloonsToShoot: 18 },
            5: { balloonSpeed: 3.5, generationRate: 600, nonRedChance: 0.6, balloonsToShoot: 20 }
        };
        const BALLOON_SIZE = 35;
        const CANNONBALL_SPEED = 12;
        const SCORE_PER_RED_BALLOON = 10;
        const MAX_LEVEL = 5;

        let redBalloonsShotInLevel = 0;

        // --- Utility Functions ---
        function showScreen(screenElement) {
            document.querySelectorAll('.game-screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            screenElement.classList.remove('hidden');
        }

        function updateDisplay() {
            playerNameDisplay.textContent = playerName;
            scoreDisplay.textContent = score;
            livesDisplay.textContent = lives;
            levelDisplay.textContent = level;
        }

        function getRandomColor() {
            const colors = ['blue', 'green', 'yellow', 'purple'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function createTapIndicator(x, y) {
            const indicator = document.createElement('div');
            indicator.className = 'tap-indicator';
            indicator.style.left = `${x - 15}px`;
            indicator.style.top = `${y - 15}px`;
            gameArea.appendChild(indicator);
            
            setTimeout(() => {
                if (gameArea.contains(indicator)) {
                    indicator.remove();
                }
            }, 600);
        }

        function createParticles(x, y, count = 6) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.animationDelay = `${Math.random() * 0.2}s`;
                
                // Random direction
                const angle = (Math.PI * 2 * i) / count;
                const distance = 20 + Math.random() * 30;
                particle.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
                
                gameArea.appendChild(particle);
                
                setTimeout(() => {
                    if (gameArea.contains(particle)) {
                        particle.remove();
                    }
                }, 600);
            }
        }

        // --- Game Logic Functions ---
        function startGame() {
            playerName = playerNameInput.value.trim();
            if (playerName === '') {
                alert('Please enter your name!');
                return;
            }
            score = 0;
            lives = 3;
            level = 1;
            redBalloonsShotInLevel = 0;
            balloonsOnScreen.length = 0;
            gameArea.innerHTML = '';
            gameArea.appendChild(cannon);
            
            // Add instructions back
            const instructions = document.createElement('div');
            instructions.className = 'instructions';
            instructions.textContent = 'Tap anywhere to move cannon ‚Ä¢ Tap to fire ‚Ä¢ Shoot only red balloons!';
            gameArea.appendChild(instructions);
            
            cannon.style.left = `${gameArea.offsetWidth / 2 - cannon.offsetWidth / 2}px`;

            showScreen(gamePlayScreen);
            gameRunning = true;
            gamePaused = false;
            updateDisplay();
            startLevel();
        }

        function startLevel() {
            redBalloonsShotInLevel = 0;
            balloonsOnScreen.length = 0;
            gameArea.querySelectorAll('.balloon').forEach(b => b.remove());
            gameArea.querySelectorAll('.cannonball').forEach(cb => cb.remove());

            const currentSettings = LEVEL_SETTINGS[level];
            if (!currentSettings) {
                endGame(true);
                return;
            }

            clearInterval(balloonGenerationInterval);
            balloonGenerationInterval = setInterval(generateBalloon, currentSettings.generationRate);
            if (gameLoopInterval) {
                cancelAnimationFrame(gameLoopInterval);
            }
            gameLoop();
        }

        function pauseGame() {
            if (!gameRunning) return;
            gamePaused = true;
            showScreen(pauseScreen);
            clearInterval(balloonGenerationInterval);
            cancelAnimationFrame(gameLoopInterval);
        }

        function continueGame() {
            gamePaused = false;
            showScreen(gamePlayScreen);
            const currentSettings = LEVEL_SETTINGS[level];
            balloonGenerationInterval = setInterval(generateBalloon, currentSettings.generationRate);
            gameLoop();
        }

        function restartGame() {
            clearInterval(balloonGenerationInterval);
            cancelAnimationFrame(gameLoopInterval);
            startGame();
        }

        function endGame(win = false) {
            gameRunning = false;
            gamePaused = false;
            clearInterval(balloonGenerationInterval);
            cancelAnimationFrame(gameLoopInterval);
            gameArea.innerHTML = '';
            gameArea.appendChild(cannon);
            
            // Add instructions back
            const instructions = document.createElement('div');
            instructions.className = 'instructions';
            instructions.textContent = 'Tap anywhere to move cannon ‚Ä¢ Tap to fire ‚Ä¢ Shoot only red balloons!';
            gameArea.appendChild(instructions);

            if (win) {
                if (level >= MAX_LEVEL) {
                    levelCompleteMessage.textContent = "üèÜ You Win! All Levels Complete!";
                    levelCompletePlayerName.textContent = playerName;
                    nextLevelButton.textContent = "Play Again!";
                    nextLevelButton.onclick = restartGame;
                } else {
                    levelCompleteMessage.textContent = `üéâ Level ${level} Complete!`;
                    levelCompletePlayerName.textContent = playerName;
                    nextLevelButton.textContent = "Next Level";
                    nextLevelButton.onclick = nextLevel;
                }
                showScreen(levelCompleteScreen);
            } else {
                finalScoreDisplay.textContent = score;
                showScreen(gameOverScreen);
            }
        }

        function generateBalloon() {
            if (!gameRunning || gamePaused) return;

            const balloon = document.createElement('div');
            const color = Math.random() < LEVEL_SETTINGS[level].nonRedChance ? getRandomColor() : 'red';
            balloon.className = `balloon ${color}`;
            balloon.dataset.color = color;
            balloon.style.left = `${Math.random() * (gameArea.offsetWidth - BALLOON_SIZE)}px`;
            balloon.style.top = `-50px`;
            gameArea.appendChild(balloon);
            balloonsOnScreen.push(balloon);
        }

        function moveBalloons() {
            const currentSettings = LEVEL_SETTINGS[level];
            for (let i = balloonsOnScreen.length - 1; i >= 0; i--) {
                const balloon = balloonsOnScreen[i];
                let currentTop = parseFloat(balloon.style.top);
                balloon.style.top = `${currentTop + currentSettings.balloonSpeed}px`;

                if (currentTop > gameArea.offsetHeight) {
                    if (balloon.dataset.color === 'red' && !balloon.dataset.popped) {
                        lives--;
                        updateDisplay();
                        if (lives <= 0) {
                            endGame();
                            return;
                        }
                    }
                    balloon.remove();
                    balloonsOnScreen.splice(i, 1);
                }
            }
        }

        function moveCannonball(cannonball) {
            let currentBottom = parseFloat(cannonball.style.bottom);
            cannonball.style.bottom = `${currentBottom + CANNONBALL_SPEED}px`;

            for (let i = balloonsOnScreen.length - 1; i >= 0; i--) {
                const balloon = balloonsOnScreen[i];
                if (balloon.dataset.popped || !gameArea.contains(balloon)) continue;

                const balloonRect = balloon.getBoundingClientRect();
                const cannonballRect = cannonball.getBoundingClientRect();

                if (
                    cannonballRect.left < balloonRect.right &&
                    cannonballRect.right > balloonRect.left &&
                    cannonballRect.top < balloonRect.bottom &&
                    cannonballRect.bottom > balloonRect.top
                ) {
                    cannonball.remove();
                    
                    // Create particles at collision point
                    const gameAreaRect = gameArea.getBoundingClientRect();
                    createParticles(
                        balloonRect.left - gameAreaRect.left + balloon.offsetWidth / 2,
                        balloonRect.top - gameAreaRect.top + balloon.offsetHeight / 2
                    );

                    if (balloon.dataset.color === 'red') {
                        score += SCORE_PER_RED_BALLOON;
                        redBalloonsShotInLevel++;
                        balloon.classList.add('popped');
                        balloon.dataset.popped = 'true';
                        setTimeout(() => {
                            if (gameArea.contains(balloon)) {
                                balloon.remove();
                            }
                        }, 300);
                    } else {
                        lives--;
                        balloon.classList.add('popped');
                        balloon.dataset.popped = 'true';
                        setTimeout(() => {
                            if (gameArea.contains(balloon)) {
                                balloon.remove();
                            }
                        }, 300);
                    }
                    updateDisplay();
                    if (lives <= 0) {
                        endGame();
                        return;
                    }
                    checkLevelCompletion();
                    return;
                }
            }

            if (currentBottom > gameArea.offsetHeight) {
                cannonball.remove();
            }
        }

        function fireCannon() {
            if (!gameRunning || gamePaused) return;

            cannon.classList.add('firing');
            setTimeout(() => cannon.classList.remove('firing'), 200);

            const cannonball = document.createElement('div');
            cannonball.className = 'cannonball';
            cannonball.style.left = `${cannon.offsetLeft + cannon.offsetWidth / 2 - 6}px`;
            cannonball.style.bottom = `${cannon.offsetHeight + 5}px`;
            gameArea.appendChild(cannonball);
        }

        function moveCannon(targetX) {
            if (!gameRunning || gamePaused) return;
            
            // Constrain to game area
            const maxX = gameArea.offsetWidth - cannon.offsetWidth;
            const newX = Math.max(0, Math.min(maxX, targetX - cannon.offsetWidth / 2));
            
            cannon.style.left = `${newX}px`;
            cannon.classList.add('moving');
            setTimeout(() => cannon.classList.remove('moving'), 300);
        }

        function checkLevelCompletion() {
            const currentSettings = LEVEL_SETTINGS[level];
            if (redBalloonsShotInLevel >= currentSettings.balloonsToShoot) {
                gameRunning = false;
                clearInterval(balloonGenerationInterval);
                cancelAnimationFrame(gameLoopInterval);

                if (level < MAX_LEVEL) {
                    showScreen(levelCompleteScreen);
                } else {
                    endGame(true);
                }
            }
        }

        function nextLevel() {
            level++;
            if (level > MAX_LEVEL) {
                endGame(true);
                return;
            }
            showScreen(gamePlayScreen);
            gameRunning = true;
            gamePaused = false;
            updateDisplay();
            startLevel();
        }

        // --- Game Loop ---
        function gameLoop() {
            if (!gameRunning || gamePaused) return;

            moveBalloons();
            gameArea.querySelectorAll('.cannonball').forEach(cb => {
                moveCannonball(cb);
            });

            gameLoopInterval = requestAnimationFrame(gameLoop);
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', startGame);
        playerNameInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') startGame();
        });

        // New tap-to-move and tap-to-fire system
        gameArea.addEventListener('click', (e) => {
            if (!gameRunning || gamePaused) return;
            
            const gameAreaRect = gameArea.getBoundingClientRect();
            const clickX = e.clientX - gameAreaRect.left;
            const clickY = e.clientY - gameAreaRect.top;
            
            // Create tap indicator
            createTapIndicator(clickX, clickY);
            
            // Move cannon to tap position
            moveCannon(clickX);
            
            // Fire after a short delay to allow cannon to move
            setTimeout(() => {
                fireCannon();
            }, 150);
        });

        // Touch support
        gameArea.addEventListener('touchstart', (e) => {
            if (!gameRunning || gamePaused || e.touches.length === 0) return;
            e.preventDefault();
            
            const gameAreaRect = gameArea.getBoundingClientRect();
            const touchX = e.touches[0].clientX - gameAreaRect.left;
            const touchY = e.touches[0].clientY - gameAreaRect.top;
            
            createTapIndicator(touchX, touchY);
            moveCannon(touchX);
            
            setTimeout(() => {
                fireCannon();
            }, 150);
        }, { passive: false });

        pauseButton.addEventListener('click', pauseGame);
        continueButton.addEventListener('click', continueGame);